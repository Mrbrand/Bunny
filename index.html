<!DOCTYPE html>
<html>
    <head>
        <title>Wiseguy</title> 
    	
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport" />
        <!meta name="viewport" content="width=device-width, initial-scale=1"/>
		<meta content="yes" name="apple-mobile-web-app-capable" />
		<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type" />
		<link rel="apple-touch-icon" href="img/icon.png"/>
        <link rel="icon" type="image/png" href="http://betarabbit.com/wiseguy/img/target.png">
        
        <link rel="stylesheet" href="awesomplete/awesomplete.css" />
        <script src="awesomplete/awesomplete.js"></script>
		
		<link rel="stylesheet" type="text/css" href="style.css"/>
		<link rel="stylesheet" type="text/css" href="carbon.css"/>
		<link rel="stylesheet" type="text/css" href="light.css"/>
    	
	
        
        <script language="JavaScript" type="text/javascript" src="javascript/moment.min.js"></script>
		<script language="JavaScript" type="text/javascript" src="javascript/mustache.js"></script>	
		<script language="JavaScript" type="text/javascript" src="javascript/jquery-2.1.3.min.js"></script> 
        <!--script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script-->
		<script language="JavaScript" type="text/javascript" src="javascript/jquery.detect_swipe.js"></script> 
		<!--script language="JavaScript" type="text/javascript" src="javascript/tinysort.js"></script-->
         <!--dropdown select inputs-->
        <script src="javascript/jquery.dd.min.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="css/msdropdown/dd.css" />
        
        <script src="javascript/sortable.js"></script>
		
	</head
	
	
	<body>
	
	
	
		<!--TREE PAGE -------------->
			<div id="tree" class="page" style="display:block; min-height:450px;">
			  
			<div class="header">
				<div class="menu-title">Root</div>
				<img class="search-button" src="img/star.png"  style="float:right; margin:5px; cursor:pointer;"/>
                <img class="pref-button" src="img/gear.png"  style="float:right; margin:5px; cursor:pointer;"/>
			</div> <!--end header-->
			
			<!--Sub-meny-->
			<div class="controls">
				<button class="back-button">Back</button>
				
                <button class="new-button">New</button>
                
                <img src="img/search.png" onclick="to_search();" style="float:right; margin-right:5px;"/>
                <!input id="search-item" onkeyup="view_item(current.id);" style="float:right; margin-right:10px;width:150px;" placeholder="Filter"/>
    	
			</div><!-- end controls-->
			
			<!-- Projektlista -->
			<div id="items">
				<div id="open" class="list-group"></div>
				<div id="finished"></div>
			</div><!-- end items--> 
			
		</div><!-- end page-->

		
		<!--SEARCH PAGE -------------->
			<div id="search" class="page">
			  
			<div class="header">
				<div style="float:left;">Search</div>
				<img class="tree-button" src="img/tree-icon.png"  style="float:right; margin:5px; cursor:pointer;"/>
                <img class="pref-button" src="img/gear.png"  style="float:right; margin:5px; cursor:pointer;"/>
			</div> <!--end header-->
			
			<!--Controls-->
			<div class="controls" style="height:40px; padding: 5px;">
                <!--button class="type-button" onclick="$('#controls-type').toggle();" style="float:left;margin-left:5px;">Type</button-->
                <!--button class="status-button" onclick="$('#controls-status').toggle();" style="float:left;margin-left:5px;">Status</button-->
                <div id="prefefined" style="float:left;"></div>
                <button onclick=" $('.type-filter').val('6'); $('.path-filter').val(''); $('.search').val(''); view_filter();" style="float:right; margin-left:5px;"><img src="img/type6.png" height="16"/></button>
                <!--button onclick=" $('.type-filter').val(''); view_filter();" style="margin-left:5px;">All</button-->
            </div><!-- end controls-->
            
            <!--Controls extra-->
            <div id="controls-extra" class="controls-extra" style="height:40px; padding: 5px;">
                <div style="float:left;">
                    
                </div>
                <div id="path-buttons" style="float:left;"></div>
                <!--div style="float:left; margin-left:5px;">
                      <button onclick="itemList.update_postpone();$('.search').val('');  $('.type-filter').val('');$('.status-filter').val('open');$('.path-filter').val(''); $('.type-filter').val('');  $('.prio-filter').val('5'); $('#controls-title').hide(); view_filter();">Rst</button>
                </div-->
				
                <button class="path-button" onclick="$('#controls-title').toggle();" style="float:right;margin-left:5px;">...</button>
				<button onclick=" $('.type-filter').val('7'); $('.path-filter').val(''); $('.search').val(''); view_filter();" style="float:right; margin-right:5px;"><img src="img/type7.png" height="16"/></button>
                <!--button class="path-button" onclick="$('#controls-extra').toggle();" style="float:right;margin-left:5px;">...</button-->
                <!--button class="title-button" onclick="$('#controls-title').toggle();" style="float:right;margin-left:5px;">Title</button-->
            </div><!-- end controls-->
            
            
            <!Title-filter>
            <div id="controls-title" class="controls-extra" style="display:none;">
                <input class="search" onkeyup="view_filter();" placeholder="Title search" value="" style="width:70px; float:left; margin-right:5px;"/>
                <button onclick=" $('.type-filter').val('4'); view_filter();" style="float:left; margin-left:5px;"><img src="img/type4.png" height="16"/></button>
                <button onclick=" $('.type-filter').val('6'); view_filter();" style="float:left; margin-left:5px;"><img src="img/type6.png" height="16"/></button>
                <button onclick=" $('.type-filter').val('7'); view_filter();" style="float:left; margin-left:5px;"><img src="img/type7.png" height="16"/></button>
                <button onclick=" $('.type-filter').val('5'); view_filter();" style="float:left; margin-left:5px;"><img src="img/type5.png" height="16"/></button>
                <button onclick=" $('.type-filter').val('15'); view_filter();" style="float:left; margin-left:5px;"><img src="img/type15.png" height="16"/></button>
                <input class="type-filter" placeholder="Type" style="width:50px; margin-left:5px;"/>
                
                 <select style="float:right;margin-left:5px;width:40px;" class="prio-filter" onchange="view_filter();">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5" selected>5</option>
                    <option value="6">6</option>
                </select>
                
                 <button class="status-button" onclick="togggleStatus();" style="float:right;margin-left:5px;">Status</button>
                 <input class="path-filter" type="text" onkeyup="view_filter();" placeholder="Path string" value="" style="width:70px; margin-right:5px;"/>
                <!--div style="float:left;">
               		<button onclick="$('.search').val(''); view_filter();" style="margin-left:5px;">Clr</button>
                </div-->
                
            </div><!-- end controls-->
            
            <!Type-filter>
            <!--div id="controls-type" class="controls-extra">
                <!--button class="status-button" onclick="$('#controls-status').toggle();" style="float:left;margin-left:5px;">Status</button-->
                <!--input class="type-filter" type="hidden"/>
            </div><!-- end controls-->
            
            <!Path-filter>
            <!--div id="controls-path" class="controls-extra">
                <div id="root-items" style="float:left;"></div>
            </div><!-- end controls-->
            
            <!Status-filter>
            <div id="controls-status" style="display:none;" >
                <select class="status-filter" onchange="view_filter();">
    				<option value="open">Status: Open</option>
					<option value="finished">Status: Finished</option>
				</select>
            </div><!-- end controls-->
			
			<!-- ItemLista -->
			<div id="items">
				<div id="filtered"></div>
			</div><!-- end items--> 
			
		</div><!-- end page-->
		
		
		
		<!-- EDIT item ---------------------------------------------------------------------->
		<div id="edit" class="page">
			
			<div class="header">
				<div class="menu-title">-item-title-</div>
			</div> <!--end header-->
			
			<!--Sub-meny-->
			<div class="controls">
				<button class="cancel-button">Cancel</button>
				<button class="save-button" style="width:70px; float:right;margin-left:5px;"><img src="img/save.png" /></button>
				<button class="delete-button" style="width:70px; float:right;margin-left:5px;"><img src="img/delete2.png" /></button>
				<button class="finish-button" style="width:70px; float:right;margin-left:5px;"><img src="img/finish.gif" /></button>
				<br/><br/>
			</div><!-- end controls--> 
			
			<form id="edit-item-form">
				<input class="item-title" name="title" type="text" style="margin-bottom:5px; height:50px; font-size:1.3em"/><br/>
				
				<select id="edit-item-type" class="drop_with_images" name="type" style="width:100%; margin-bottom:5px;">
                    <option value="4" data-image="img/type4.png">Idea</option>
                    <option value="6" data-image="img/type6.png">Task</option>
                    <option value="7" data-image="img/type7.png">Project</option>
                    <option value="5" data-image="img/type5.png">Problem</option>
                    <option value="15" data-image="img/type15.png" style="height:24px;">Vision</option> 
    				<option value="13" data-image="img/type13.png">Category</option>   
				</select>
                
               
                
                <select id="edit-item-prio" class="drop_with_images" name="prio" style="width:100%; margin-bottom:5px;">
                    <option value="1" data-image="img/prio1.png">Urgent</option>
        			<option value="2" data-image="img/prio2.png">Important</option>
					<option value="3" data-image="img/prio3.png">Significant</option>
					<option value="4" data-image="img/prio4.png">Relevant</option>
					<option value="5" data-image="img/prio5.png">Noteworthy</option>
        			<option value="6" data-image="img/prio6.png">No priority</option>    
                </select><br/>
                
                 <!--select id="order" name="order" style="width:50%; margin-bottom:5px; float:left;">
                    <option value="0">Överst</option>
    			</select><br/-->
                
               
                <span class="field-description">Postpone</span>    
				<input id="postpone" type="date" name="postpone" min="2015-11-17" max="2025-12-31" />
                
				
				<!--button type="button" style="margin-right:5px; margin-bottom:5px;" onclick="$('#postpone').val(moment().add(1, 'days').format('YYYY-MM-DD ddd'));">Tomorrow</button>	
				<button type="button" style="margin-right:5px; margin-bottom:5px;" onclick="$('#postpone').val((moment($('#postpone').val(), 'YYYY-MM-DD-ddd').add(1, 'days')).format('YYYY-MM-DD ddd'));">+1 day</button>	
				<button type="button" style="margin-right:5px; margin-bottom:5px;" onclick="$('#postpone').val((moment($('#postpone').val(), 'YYYY-MM-DD-ddd').add(1, 'week')).format('YYYY-MM-DD ddd'));">+1 week</button>
				-->
			  	
									

				<textarea class="item-notes" name="notes" rows="10" placeholder="Notes"></textarea>

				<center>
					<button class="more-button" type='button'>More options</button>
				</center>
				<div class="more" style="display:none;">

                    <! hidden >
					<input class="item-id" name="id" type="hidden" /> <br/>
    				<input class="item-parent-id" name="parent_id" type="hidden"/><br/>	
    				<input id="order" type="hidden" name="order" />
                    	
                    <span class="field-description">Parent item in tree</span>
        			<input id="parent" type="text" placeholder="Type item name or id" style="margin-bottom:5px;height:40px; font-size:1.1em; width: 100%;"/>	
                    
                    <span class="field-description">Make item respawn after finish</span>
                    <input id="repeat" type="text" name="repeat" placeholder="Respawn after ... days" style="margin-bottom:5px;height:40px; font-size:1.1em" /> <br/>
                                        
                    <span class="field-description">Custom icon</span>
                	<input class="icon" name="icon" placeholder="Chose from your emojs" type="text" style="margin-bottom:5px;height:40px; font-size:1.1em"/><br/>
                                                        
                    <span class="field-description">Item created</span>
					<input class="start_date" name="start_date" type="text" style="margin-bottom:5px;height:40px; font-size:1.1em"/><br/>	
                    
                    <span class="field-description">Last updated</span>
    				<input class="update_date" name="update_date" type="text" placeholder="Not set" style="margin-bottom:5px;height:40px; font-size:1.1em"/><br/>
					
                    <span class="field-description">Finish date</span>
					<input class="finish_date" name="finish_date" type="text" placeholder="Not set" style="margin-bottom:5px;height:40px; font-size:1.1em"/><br/>
					
				</div>
				
			</form>
		</div><!--edit-item--> 

		<!-- NEW item--------------------------------------------------------------------------->
		<div id="new" class="page">
			
			<div class="header">
				<div class="menu-title">-new item-</div>
			</div> <!--end header-->
			
			<!--Sub-meny-->
			<div class="controls">
				<button class="cancel-button">Cancel</button>
				<button class="add-button">Add</button>
			</div><!-- end controls--> 
			
			
			
			<form id="new-item-form">
				<textarea  id="new-item-title" name="title" placeholder="Title" rows="1" autofocus style="margin-bottom:5px;height:50px; font-size:1.3em; padding-top: 11px;"></textarea><br/>
				
				<select id="new-item-type" class="drop_with_images" name="type" style="width:100%; margin-bottom:5px;">
                    <option value="4" data-image="img/type4.png">Idea</option>
                    <option value="6" data-image="img/type6.png">Task</option>
                    <option value="7" data-image="img/type7.png">Project</option>
                    <option value="5" data-image="img/type5.png">Problem</option>
                    <option value="15" data-image="img/type15.png">Vision</option> 
        			<option value="13" data-image="img/type13.png">Category</option>  
				</select><br/>
                
          <select id="new-item-prio" class="drop_with_images" name="prio1" style="width:100%; margin-bottom:5px; display:none;">
              <option value="1" data-image="img/prio1.png">Urgent</option>
      		<option value="2" data-image="img/prio2.png">Important</option>
					<option value="3" data-image="img/prio3.png">Significant</option>
					<option value="4" data-image="img/prio4.png">Relevant</option>
					<option value="5" data-image="img/prio5.png">Noteworthy</option>
                    <option value="6" data-image="img/prio6.png">No priority</option>    
                </select><br/>
          
				<input type="radio" name="prio" id="1" class="input-hidden" value="1" checked />
        <label for="1"><img src="img/prio1.png" />  </label>

				<input type="radio" name="prio" id="2" class="input-hidden" value="2" />
        <label for="2"><img src="img/prio2.png" />  </label>

				<input type="radio" name="prio" id="3" class="input-hidden" value="3" />
        <label for="3"><img src="img/prio3.png" />  </label>

				<input type="radio" name="prio" id="4" class="input-hidden" value="4" />
        <label for="4"><img src="img/prio4.png" />  </label>

				<input type="radio" name="prio" id="5" class="input-hidden" value="5" />
        <label for="5"><img src="img/prio5.png" />  </label>

				<input type="radio" name="prio" id="6" class="input-hidden" value="6" />
        <label for="6"><img src="img/none.png" /> </label>


                <input id="new-item-postpone" type="date" name="postpone" min="2015-11-17" max="2025-12-31" />
                
				<textarea id="new-item-notes" name="notes" placeholder="Notes" rows="10"></textarea>
				
                <input type="hidden" name="order" id="new-order" />
				<input type="hidden" name="parent_id" id="new-parent-id" value="0"/>
				<input type="hidden" name="status" value="open" placeholder="Status" style="margin-bottom:5px;"/>
				
			</form>
			<br/><br/><br/><br/><br/><br/><br/>
		</div><!-- end new-item--> 
	
	</body>
</html>



<!MENU >
		<div id="menu" class="page">
			
            <div class="header">
    			<div style="float:left;">Preferences</div>
			</div> <!--end header-->
			
			<!--Sub-meny-->
			<div class="controls">
				<button class="cancel-button">Back</button>
                 <button onclick="save_preferences();" style="float:right;">Save</button>
			</div><!-- end controls-->
            
            
			<span class="field-description">Predefined filters</span>
            <input type="text" id="slot1" style="width:50px; text-align:center;" placeholder="Slot 1"/>
            <input type="text" id="slot2" style="width:50px; text-align:center;" placeholder="Slot 2"/>
            <input type="text" id="slot3" style="width:50px; text-align:center;" placeholder="Slot 3"/>
            <input type="text" id="slot4" style="width:50px; text-align:center;" placeholder="Slot 4"/>
            <input type="text" id="slot5" style="width:50px; text-align:center;" placeholder="Slot 5"/>
            <input type="text" id="slot6" style="width:50px; text-align:center;" placeholder="Slot 6"/>
            <input type="text" id="slot7" style="width:50px; text-align:center;" placeholder="Slot 7"/><br/>
            
            <span class="field-description">Star icon</span>
            <input type="text" id="star_icon" style="width:70px;" placeholder="Star icon"/><br/>
            
            <span class="field-description">Background (CSS color)</span>
            <input type="text" id="background_color" style="width:70px;" placeholder=""/><br/>
            <span class="field-description">Menu (CSS color)</span>
            <input type="text" id="controls_color" style="width:70px;" placeholder=""/><br/>
           
            <h3>Statistics</h3>
            <div id="statistics"></div>
            
            
            
		</div><!-- end menu--> 
	</body>
</html>



<!-- Mustache template öppna-->
<script id="open_items_template" type="text/template">
	<div class="subitem project {{#postpone}} postponed{{/postpone}}">
						
		<div class="subitem-left quick_edit_item">
			
    		{{#icon}}<div style="font-size: 22px; margin:10px 7px 0 7px; ">{{icon}}</div>{{/icon}}
			{{^icon}}<img class="type-icon" style="margin:10px 7px 0 7px; height:32px;" src="img/type{{type}}.png"/>{{/icon}}
            <img class="prio-icon" src="img/prio{{prio}}.png"/>
            <!--span style="color:#888;">{{order}}</span-->
		</div>
		
        
        <div class="subitem-right" style="width:30px; float: right;  height:40px; padding:15px 20px 10px 20px;;">
    		<img src="img/handle3.png"/>
		</div>
        
		<div class="subitem-center">
			<div class="title" style="">{{title}}</div>
			<div class="next_action_div" style="float:left;">
				{{#postpone}}<span class="postpone">{{postpone}}</span>{{/postpone}}
				{{#notes}}<div class="notes">{{notes}}</div>{{/notes}}
				{{#subitems}}
					<img style="margin:4px 0px 4px 5px;height:10px;vertical-align: text-top;" src="img/type{{type}}.png"/>
					<span class="next_action">{{title}}</span>
                    {{#postpone}}<span class="postpone" style="background:#567;">{{postpone}}</span>{{/postpone}}<br/>
				{{/subitems}}
			</div>
		</div><!-- end subitem-center -->
		 
		<div style="clear:both;"></div>
		
		<span class="item_id" style="display:none;">{{id}}</span>
		<span class="prio" style="display:none;">{{prio}}</span>
		<span class="type" style="display:none;">{{type}}</span>
		<span class="size" style="display:none;">{{size}}</span>
	
	</div><!-- end subitem  -->
</script>	
	
	
<!-- Mustache template avslutade -->
<script id="finished_items_template" type="text/template">
	<div class="subitem finished project">
						
		<div class="subitem-left quick_edit_item">
			<img class="prio-icon" src="img/prio{{prio}}.png"/>
			<img class="type-icon" style="margin:4px 7px;" src="img/type{{type}}.png"/>
			<!img class="type-icon" style="margin:0;" src="img/size{{size}}.png"/>
		</div>
		
		<div class="subitem-center">
			<div class="title" style="">{{title}}</div>
			<div class="next_action_div" style="float:left;">
				<span class="finish_date">{{finish_date}}</span>
				{{#notes}}<span class="notes">{{notes}}</span>{{/notes}}
				
			</div>
		</div><!-- end subitem-center -->
		 
		<div style="clear:both;"></div>
		
		<span class="item_id" style="display:none;">{{id}}</span>
		<span class="prio" style="display:none;">{{prio}}</span>
		<span class="type" style="display:none;">{{type}}</span>
	
	</div><!-- end subitem  -->
</script>	
	
	
<!-- Mustache template search -->
<script id="filtered_items_template" type="text/template">
	<div class="subitem project{{#finish_date}} finished{{/finish_date}}{{#postpone}} postponed{{/postpone}}">
						
		<div class="subitem-left quick_edit_item">
			<img class="prio-icon" src="img/prio{{prio}}.png"/>
			{{#icon}}<div style="font-size: 18px; margin:4px 7px; ">{{icon}}</div>{{/icon}}
			{{^icon}}<img class="type-icon" style="margin:4px 7px;" src="img/type{{type}}.png"/>{{/icon}}
			<!img class="type-icon" style="margin:0;" src="img/size{{size}}.png"/>
		</div>
		
		<div class="subitem-center">
			<div class="title" style="">{{title}}</div>
			{{#path}}<div class="path" style="">{{path}}</div>{{/path}}
			<div class="next_action_div" style="float:left;">
				{{#finish_date}}<span class="finish_date">{{finish_date}}</span><br/>{{/finish_date}}
                {{#postpone}}<span class="postpone">{{postpone}}</span><br/>{{/postpone}}
				{{#notes}}<div class="notes">{{notes}}</div>{{/notes}}
				{{#subitems}}
                    <img style="margin:4px 0px 4px 5px;height:10px;vertical-align: text-top;" src="img/type{{type}}.png"/>
					<span class="next_action">{{title}}</span> 
                    {{#postpone}}<span class="postpone" style="background:#567;">{{postpone}}</span>{{/postpone}}<br/>
                    <br/>
				{{/subitems}}
			</div>
		</div><!-- end subitem-center -->
		 
		<div style="clear:both;"></div>
		
		<span class="item_id" style="display:none;">{{id}}</span>
		<span class="prio" style="display:none;">{{prio}}</span>
		<span class="type" style="display:none;">{{type}}</span>
		<span class="size" style="display:none;">{{size}}</span>
	
	</div><!-- end subitem  -->
</script>	


<script id="filter_buttons_template" type="text/template">
    <button onclick="$('.search').val('{{slot1}}'); $('.status-filter').val('open'); $('.type-filter').val('6'); $('.path-filter').val(''); view_filter();">{{slot1}}</button>
    <button onclick="$('.search').val('{{slot2}}'); $('.status-filter').val('open'); $('.type-filter').val('6'); $('.path-filter').val(''); view_filter();">{{slot2}}</button>
    <button onclick="$('.search').val('{{slot3}}'); $('.status-filter').val('open'); $('.type-filter').val('6'); $('.path-filter').val(''); view_filter();">{{slot3}}</button>
    <button onclick="$('.search').val('{{slot4}}'); $('.status-filter').val('open'); $('.type-filter').val('6'); $('.path-filter').val(''); view_filter();">{{slot4}}</button>
    <button onclick="$('.search').val('{{slot5}}'); $('.status-filter').val('open'); $('.type-filter').val('6'); $('.path-filter').val(''); view_filter();">{{slot5}}</button>
    <button onclick="$('.search').val('{{slot6}}'); $('.status-filter').val('open'); $('.type-filter').val('6'); $('.path-filter').val(''); view_filter();">{{slot6}}</button>
    <button onclick="$('.search').val('{{slot7}}'); $('.status-filter').val('open'); $('.type-filter').val('6'); $('.path-filter').val(''); view_filter();">{{slot7}}</button>
</script>	

<script id="path_button_template" type="text/template">
    <button onclick="$('.path-filter').val('//{{title}}/');  $('.type-filter').val('7'); $('.search').val(''); view_filter();">{{icon}}</button>
</script>

	
    <script language="JavaScript" type="text/javascript" src="array_query.js"></script>
    <script language="JavaScript" type="text/javascript" src="carbon.js"></script>
	<script language="JavaScript" type="text/javascript" src="controller.js"></script>
    <script language="javascript">

</script>
    
